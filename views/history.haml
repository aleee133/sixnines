- # (The MIT License)
- # 
- # Copyright (c) 2017-2025 Yegor Bugayenko
- # 
- # Permission is hereby granted, free of charge, to any person obtaining a copy
- # of this software and associated documentation files (the 'Software'), to deal
- # in the Software without restriction, including without limitation the rights
- # to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
- # copies of the Software, and to permit persons to whom the Software is
- # furnished to do so, subject to the following conditions:
- # 
- # The above copyright notice and this permission notice shall be included in all
- # copies or substantial portions of the Software.
- # 
- # THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
- # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
- # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
- # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
- # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
- # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
- # SOFTWARE.

%p
  = EpUri.new(e).favicon('small')
  = EpUri.new(e).to_html
  = EpBadge.new(e).to_html
- if defined?(user) && user[:login] == 'yegor256'
  %p
    %a{href: "/flush/#{e.to_h[:id]}", onclick: 'return confirm("Are you sure? The entire history will be destoyed!");'}
      Flush it
%p
  Avail.
  %strong= EpAvailability.new(e).full
  Avg.
  %strong= EpGraph.new(e).avg_full
%p
  - if e.to_h[:flipped]
    Flipped
    %strong
      =time_ago(e.to_h[:flipped]) + ' ago'
  Created
  %strong
    =time_ago(e.to_h[:created]) + ' ago'
%p
  = EpGraph.new(e).to_html
%p
  More in
  %a{href: "/d/#{e.to_h[:id]}"} JSON
- if e.to_h[:log]
  %p
    %a{onclick: "$('#log').toggle();"} View last failed HTTP log
  %pre#log{style: 'display: none;'}=html_escape(e.to_h[:log])
